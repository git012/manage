webpackJsonp([11],{1012:function(e,t,a){e.exports={default:a(1014),__esModule:!0}},1013:function(e,t,a){"use strict";t.__esModule=!0;var r=a(1012),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,a){return t in e?(0,s.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},1014:function(e,t,a){a(1015);var r=a(66).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},1015:function(e,t,a){var r=a(117);r(r.S+r.F*!a(85),"Object",{defineProperty:a(67).f})},1062:function(e,t,a){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(155),o=r(s),i=a(1013),n=r(i),d=a(230),l=r(d),p=a(116),c=r(p),u=a(100),_=r(u);t.default={name:"Ordermanagement",data:function(){var e=this;return{modal2:!1,orderState:!1,modal10:!1,recordStatus:[],paytype:["未知","购物积分","红积分","支付宝","微信","银行卡"],columnsExpressage:[{title:"邮寄方式",key:"shipping_method"},{title:"快递名称",align:"center",key:"expressage_name"},{title:"快递单号",key:"shipping_express_no"},{title:"快递编号",key:"shipping_express_code"},{title:"快递费用",key:"shipping_method"},{title:"操作",key:"action",width:110,align:"center",render:function(t,a){var r=t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showShip(a.row.shipping_express_code,a.row.shipping_express_no)}}},"查看物流"),s=[];return a.row.shipping_express_no&&s.push(r),t("div",s)}}],columnsOrder:[{title:"会员姓名",key:"member_name"},{title:"会员电话",key:"member_name"},{title:"收货人",key:"shipping_member_name"},{title:"收货人联系电话",key:"shipping_mobile"},{title:"收货地址1",key:"shipping_address_1"},{title:"收货地址2",key:"shipping_address_2"}],columnsShoping:[{title:"订单ID",key:"order_id"},{title:"商品名称",key:"name"},{title:"数量",key:"quantity"},{title:"商品单价",key:"price"},{title:"商品小计",key:"total"}],columns:[{title:"订单编号",key:"order_no"},{title:" 商家名称 ",key:"merchant_name"},{title:"用户名称",key:"member_name"},{title:"快递单号",key:"shipping_express_no"},{title:"快递名称",align:"center",key:"expressage_name"},{title:"总价格",key:"total",render:function(e,t){return e("span",{},c.default.fmoney(c.default.numberCarry(t.row.total,100,4),4))}},{title:" 新增时间 ",key:"date_added"},{title:"支付方式",key:"payment_method",render:function(e,t){var a="default",r="待支付";return 1==t.row.payment_method&&(a="green",r="购物积分"),2==t.row.payment_method&&(a="red",r="红积分"),3==t.row.payment_method&&(a="green",r="支付宝"),4==t.row.payment_method&&(a="red",r="微信"),5==t.row.payment_method&&(a="green",r="银行卡"),e("span",{props:{color:a,size:"small"}},r)}},{title:"订单状态",key:"order_status",render:function(e,t){var a="default",r="申请中";return 1==t.row.order_status&&(a="green",r="待支付"),2==t.row.order_status&&(a="red",r="已支付"),3==t.row.order_status&&(a="green",r="待发货"),4==t.row.order_status&&(a="red",r="已发货"),5==t.row.order_status&&(a="green",r="退款中"),6==t.row.order_status&&(a="red",r="已退款"),7==t.row.order_status&&(a="green",r="已完成"),8==t.row.order_status&&(a="red",r="待评价"),9==t.row.order_status&&(a="green",r="取消订单"),10==t.row.order_status&&(a="red",r="确认收货"),11==t.row.order_status&&(a="green",r="已评价"),12==t.row.order_status&&(a="red",r="已删除"),e("span",{props:{color:a,size:"small"}},r)}},{title:"操作",key:"action",width:130,align:"center",render:function(t,a){return t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.show(a.row.id)}}},"查看")}}],saveType:"new",tableData:[],page:{dataCount:0,pageCount:0,pageSize:10,pageNumber:1,pageSizeOpts:[10,20,50,100]},currentData:{id:0,order_no:"",merchant_id:0,member_name:"",total_score:1,status:1,date_added:"",cash:0,score:0},getLoading:!1,searchData:{keyword:"",searchDate:[],startDate:"",endDate:""},searchValidata:{},orderDetail:[],orderShoping:[],orderDetails:{}}},methods:{doWhat:function(){this.init()},cancel:function(){this.modal2=!0,this.modal10=!1},del:function(){this.modal2=!1},show:function(t){var a=this,r={ssid:_.default.get("ssid"),order_id:t};e.ajax({url:l.default.apiRootPath+l.default.api.management.Ordermanagement.view,type:"POST",dataType:"json",data:r}).done(function(e){if(e)if(0==e.code){var t,r=e.data,s=[];s.push((t={member_name:r.member_name,mobile:r.mobile,shipping_member_name:r.shipping_member_name,shipping_mobile:r.shipping_mobile},(0,n.default)(t,"mobile",r.mobile),(0,n.default)(t,"shipping_address_1",r.shipping_province_name+" "+r.shipping_city_name+" "+r.shipping_district_name+" "+r.shipping_address_1),(0,n.default)(t,"shipping_address_2",r.shipping_address_2),(0,n.default)(t,"shipping_method",r.shipping_method),(0,n.default)(t,"shipping_express_no",r.shipping_express_no),(0,n.default)(t,"shipping_express_code",r.shipping_express_code),(0,n.default)(t,"shipping_method",r.shipping_method),(0,n.default)(t,"expressage_name",r.expressage_name),t)),a.orderDetail=s,a.orderShoping=e.data.product,r.comment=decodeURI(r.comment),a.orderDetails=r,a.orderState=!0}else a.$Message.error(e.message),e.code==l.default.errorCode.runOut.num&&a.$store.commit("logout",a);else a.$Message.error("获取订单详情失败 "+status)}).fail(function(e,t,r){a.$Message.error("获取订单详情失败 "+t)}),this.modal2=!0},changePage:function(e){this.page.pageNumber=e,this.search()},changePageSize:function(e){this.page.pageSize=e,this.page.pageCount=Math.ceil(this.page.dataCount/this.page.pageSize),this.search()},search:function(){console.log((0,o.default)(this.searchData)),this.searchData.searchDate.length&&(this.searchData.startDate=c.default.FormatDate(this.searchData.searchDate[0],"yyyy-MM-dd"),this.searchData.endDate=c.default.FormatDate(this.searchData.searchDate[1],"yyyy-MM-dd")),this.init()},resetSearch:function(){this.searchData={keyword:"",searchDate:[],startDate:"",endDate:"",type:0},this.page.pageNumber=1,this.dataReady+=1,this.init()},init:function(){var t=this,a={ssid:_.default.get("ssid"),page:this.page.pageNumber,pageSize:this.page.pageSize};""!=this.searchData.keyword&&(a.search=c.default.trim(this.searchData.keyword)),""!=this.searchData.startDate&&(a.startDate=this.searchData.startDate),""!=this.searchData.endDate&&(a.endDate=this.searchData.endDate),e.ajax({url:l.default.apiRootPath+l.default.api.management.Ordermanagement.list,type:"POST",dataType:"json",data:a}).done(function(e){if(e)if(0==e.code){t.page.dataCount=e.data.count,t.page.pageCount=Math.ceil(t.page.dataCount/t.page.pageSize);for(var a=0;a<e.data.list.length;a++)e.data.list[a].comment=decodeURI(e.data.list[a].comment);t.tableData=e.data.list}else t.$Message.error(e.message),e.code==l.default.errorCode.runOut.num&&t.$store.commit("logout",t);else t.$Message.error("获取订单列表失败 "+status)}).fail(function(e,a,r){t.$Message.error("获取订单列表失败 "+a)})},showShip:function(t,a){var r=this,s={ssid:_.default.get("ssid"),ShipperCode:t,LogisticCode:a};this.modal10=!0,this.modal2=!1,e.ajax({url:l.default.apiRootPath+l.default.api.management.Ordermanagement.queryShip,type:"POST",dataType:"json",data:s}).done(function(e){e?(console.log(e),0==e.code?e.data.Traces.length>0?r.recordStatus=e.data.Traces:r.recordStatus.push({AcceptStation:"暂无物流信息",AcceptTime:" "}):(r.$Message.error(e.message),e.code==l.default.errorCode.runOut.num&&r.$store.commit("logout",r))):r.$Message.error("获取详情失败 ")}).fail(function(e,t,a){r.$Message.error("获取详情失败 ")})}},mounted:function(){this.doWhat()},activated:function(){}}}).call(t,a(154))},1130:function(e,t){},1274:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",[a("div",{staticClass:"doBox"},[a("div",{staticClass:"search-box"},[a("Form",{ref:"searchData",attrs:{model:e.searchData,rules:e.searchValidata,inline:""}},[a("FormItem",{attrs:{prop:"keyword"}},[a("Input",{staticStyle:{width:"250px"},attrs:{type:"text",placeholder:"输入商家名称与会员名称搜索"},model:{value:e.searchData.keyword,callback:function(t){e.$set(e.searchData,"keyword",t)},expression:"searchData.keyword"}},[a("Icon",{staticStyle:{width:"30px"},attrs:{slot:"prepend",type:"ios-eye"},slot:"prepend"})],1)],1),e._v(" "),a("FormItem",{attrs:{prop:"searchDate"}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"daterange",placeholder:"请选择时间范围"},model:{value:e.searchData.searchDate,callback:function(t){e.$set(e.searchData,"searchDate",t)},expression:"searchData.searchDate"}})],1),e._v(" "),a("FormItem",[a("ButtonGroup",[a("Button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){e.search()}}},[e._v("搜索")]),e._v(" "),a("Button",{on:{click:function(t){e.resetSearch()}}},[e._v("清空")])],1)],1)],1)],1),e._v(" "),a("Table",{attrs:{border:"",columns:e.columns,loading:e.getLoading,data:e.tableData}}),e._v(" "),a("div",{staticClass:"page-box"},[e.page.dataCount>10?a("Page",{attrs:{total:e.page.dataCount,current:e.page.pageNumber,"show-total":"","page-size-opts":e.page.pageSizeOpts,"page-size":e.page.pageSize,"show-elevator":"",placement:"top","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}}):e._e()],1)],1),e._v(" "),e.orderState?a("Modal",{attrs:{width:"700",closable:!1,styles:{top:"10px"}},on:{"on-cancel":e.del},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("p",{staticStyle:{color:"black","font-weight":"bold","text-align":"left","font-size":"18px"},attrs:{slot:"header"},slot:"header"},[a("span",[e._v("订单详情")])]),e._v(" "),a("div",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("会员信息")]),e._v(" "),a("Table",{attrs:{columns:e.columnsOrder,data:e.orderDetail}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",{staticStyle:{"margin-top":"20px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("订单状态")]),e._v(" "),e.orderDetails.order_status>=5?a("Alert",{attrs:{type:"error"}},[e._v("订单状态：\n                                "),5==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("退款中")]):e._e(),e._v(" "),6==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已退款")]):e._e(),e._v(" "),7==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已完成")]):e._e(),e._v(" "),8==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("待评价")]):e._e(),e._v(" "),9==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("订单已取消")]):e._e(),e._v(" "),10==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("确认收货")]):e._e(),e._v(" "),11==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已评价")]):e._e(),e._v(" "),12==e.orderDetails.order_status?a("span",{staticStyle:{"font-size":"16px"}},[e._v("已删除")]):e._e()]):e._e(),e._v(" "),e.orderDetails.order_status<5?a("Steps",{attrs:{current:e.orderDetails.order_status-1,size:"small"}},[a("Step",{attrs:{title:"待支付"}}),e._v(" "),a("Step",{attrs:{title:"已支付"}}),e._v(" "),a("Step",{attrs:{title:"待发货"}}),e._v(" "),a("Step",{attrs:{title:"已发货"}})],1):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",{staticStyle:{"margin-top":"20px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("商品信息")]),e._v(" "),a("Table",{attrs:{columns:e.columnsShoping,data:e.orderShoping}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("快递信息")]),e._v(" "),a("Table",{attrs:{columns:e.columnsExpressage,data:e.orderDetail}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("Row",{attrs:{gutter:50}},[a("Col",{attrs:{span:"12"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("订单信息")]),e._v(" "),a("p",[e._v("订单总金额(元)："),a("span",{staticStyle:{"font-size":"16px",color:"red"}},[e._v("￥"+e._s(e.orderDetails.total/100))])]),e._v(" "),a("p",[e._v("支付方式："),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(""==e.orderDetails.payment_method?"待支付":e.paytype[e.orderDetails.payment_method]))])])])],1),e._v(" "),a("Col",{attrs:{span:"12"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("其他信息")]),e._v(" "),a("p",[e._v("备注：\n                                    "),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.orderDetails.comment))])]),e._v(" "),a("p",[e._v("\n                                    新增时间："),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.orderDetails.date_added))])]),e._v(" "),a("p",[e._v("\n                                    修改时间："),a("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.orderDetails.date_modified))])])])],1)],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.del}},[e._v("关闭")])],1)]):e._e(),e._v(" "),a("Modal",{attrs:{title:"物流详情",width:"500","class-name":"vertical-center-modal"},on:{"on-cancel":e.cancel},model:{value:e.modal10,callback:function(t){e.modal10=t},expression:"modal10"}},[[a("Timeline",e._l(e.recordStatus,function(t){return a("Timeline-item",[a("p",{staticClass:"time"},[e._v(e._s(t.AcceptTime))]),e._v(" "),a("p",{staticClass:"content"},[e._v(e._s(t.AcceptStation))])])}))],e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],2)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},992:function(e,t,a){a(1130);var r=a(65)(a(1062),a(1274),"data-v-55efe3fd",null);r.options.__file="F:\\changhaochen\\manage\\src\\views\\management\\Ordermanagement.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] Ordermanagement.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports}});